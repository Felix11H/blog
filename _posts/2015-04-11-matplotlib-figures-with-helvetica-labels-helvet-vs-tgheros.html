---
layout: post
title: Matplotlib figures with Helvetica labels - helvet vs. tgheros
permalink: matplotlib-tgheros
date: 2015-04-11
published: true
categories:
- Matplotlib
tags:
- Python
- tools
- Matplotlib
---


<p>
I recently spent a frustrating amount of time figuring out a good way to have labels and text in the Helvetica font in Matplotlib. Here's what I found:<br  />
</p>

<!-- more -->

<p>
The figure<br  />
</p>

<img src="{{ site.baseurl }}/assets/matplotlib_helvetica.png" alt="matplotlib_helvetica" width="620" style="border:0 none;display:block;margin:0 auto 3em;" class="alignnone" />


<p>
is generated by the following code:<br  />
</p>

<div class="org-src-container">

<pre class="src src-python"><span style="color: #859900;">import</span> pylab <span style="color: #859900;">as</span> pl
<span style="color: #859900;">import</span> numpy <span style="color: #859900;">as</span> np

<span style="color: #859900;">from</span> matplotlib <span style="color: #859900;">import</span> rc

rc(<span style="color: #2aa198;">'text'</span>, usetex=<span style="color: #6c71c4;">True</span>)
<span style="color: #b58900;">pl.rcParams</span>[<span style="color: #2aa198;">'text.latex.preamble'</span>] = [
    r<span style="color: #2aa198;">'\usepackage{tgheros}'</span>,    <span style="color: #586e75; font-style: italic;"># </span><span style="color: #657b83; font-style: italic;">helvetica font</span>
    r<span style="color: #2aa198;">'\usepackage{sansmath}'</span>,   <span style="color: #586e75; font-style: italic;"># </span><span style="color: #657b83; font-style: italic;">math-font matching  helvetica</span>
    r<span style="color: #2aa198;">'\sansmath'</span>                <span style="color: #586e75; font-style: italic;"># </span><span style="color: #657b83; font-style: italic;">actually tell tex to use it!</span>
    r<span style="color: #2aa198;">'\usepackage{siunitx}'</span>,    <span style="color: #586e75; font-style: italic;"># </span><span style="color: #657b83; font-style: italic;">micro symbols</span>
    r<span style="color: #2aa198;">'\sisetup{detect-all}'</span>,    <span style="color: #586e75; font-style: italic;"># </span><span style="color: #657b83; font-style: italic;">force siunitx to use the fonts</span>
]  


pl.figure(1, figsize=(6,4))
<span style="color: #b58900;">ax</span> = pl.axes([0.1, 0.1, 0.8, 0.7])
<span style="color: #b58900;">t</span> = np.arange(0.0, 1.0+0.01, 0.01)
<span style="color: #b58900;">s</span> = np.cos(2*2*np.pi*t)+2
pl.plot(t, s)


pl.xlabel(r<span style="color: #2aa198;">'time $\lambda$'</span>)
pl.ylabel(r<span style="color: #2aa198;">'\textit{voltage (mV)}'</span>,fontsize=16)
pl.title(r<span style="color: #2aa198;">'\TeX\ Number 1234567890 anisotropic '</span> + 
         r<span style="color: #2aa198;">'$\displaystyle\sum_{n=1}^\infty'</span> +
         r<span style="color: #2aa198;">'\frac{-e^{i\pi}}{2^n}$'</span> + 
         r<span style="color: #2aa198;">' and \SI{3}{\micro\metre}'</span>,fontsize=16, color=<span style="color: #2aa198;">'r'</span>)

pl.grid(<span style="color: #6c71c4;">True</span>)
pl.savefig(<span style="color: #2aa198;">'matplotlib_helvetica.pdf'</span>)
</pre>
</div>




<p>
To achieve the consistent Helvetica font in the figure the LaTeX rendering of Matplotlib labels and text is used. This setup is adapted from an <a href="http://stackoverflow.com/questions/2537868/sans-serif-math-with-latex-in-matplotlib/20709149#20709149">StackExchange answer</a> by Paul H.<br  />
</p>

<p>
Most importantly, I use the <code>tgheros</code> instead of the <code>helvet</code> package. You can see the difference in the images below:<br  />
</p>

<img src="{{ site.baseurl }}/assets/tgheros_vs_helvet.png" alt="tgheros_vs_helvet" width="300" style="border:0 none;display:block;margin:0 auto 3em;" class="alignnone" />


<p>
The bottom rendering of helvet has some baseline alignment problems, the "i" is positively floating in the air and the jump between "t" and "r" is particularly noticeable.<br  />
</p>

<p>
The <code>sansmath</code> package is the correct math-font matching Helvetica, as pointed out <a href="http://tex.stackexchange.com/questions/39827/math-font-to-match-helvetica">here</a>.<br  />
</p>

<p>
Finally, <code>siunitx</code> is used for the correct display of measurements in SI units. Here, for example, 3 micrometres are rendered in the title - don't make the mistake of putting the siuntix expression in a math environment, then the fonts won't work!<br  />
</p>
